apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: azure-servicebus-queue-scaledobject
  namespace: default
spec:
  scaleTargetRef:
    name: ingest
  triggers:
  - type: azure-servicebus
    metadata:
      queueName: data-upload-dev
      namespace: undpgeohub
      messageCount: "5" # default 5
      activationMessageCount: "1"
      connectionFromEnv: AzureServiceBusConnection
---
apiVersion: v1
kind: Secret
metadata:
  name: AzureServiceBusConnection
type: Opaque
data:
  CONNECTION_STRING: LW4gRGVmYXVsdEVuZHBvaW50c1Byb3RvY29sPWh0dHBzO0FjY291bnROYW1lPXVuZHBnZW9odWI7QWNjb3VudEtleT0xOE1zUU9HYkpKVGNpWWpBNURyUVBKanREajArTTA5d3ZDNTU2akc1WVVIUTNvNGhwZTFOYStyMzBEVGU3ZjdOUWdGNUN5OHdYeTJaK0FTdFUybFlUZz09O0VuZHBvaW50U3VmZml4PWNvcmUud2luZG93cy5uZXQgDQo=
